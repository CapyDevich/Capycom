@model PostModel
<link href="~/css/post.css" rel="stylesheet" />
<div class="card mb-2">
	<div class="card-body">
		<div class="d-flex align-items-center mb-3">
			<img src="~/uploads/capy.png"
				 class="rounded-circle me-3" style="width: 50px; height: 50px;">
			<div>
				<h5>@Model.Post.User?.CpcmUserNickName</h5>
				<small class="text-muted">@Model.Post.CpcmPostPublishedDate?.ToString("dd.MM.yyyy hh:mm")</small>
			</div>
		</div>

		<div class="g-2">
			<div class="row g-1 p-1">
				@Model.Post.CpcmPostText
			</div>
			<div class="row row-cols-1 @(Model.Post.CpcmImages.Count > 1 ? "row-cols-md-2 row-cols-lg-2" : "") g-4">
				@{
					foreach (var image in Model.Post.CpcmImages)
					{
						<div class="col m-0" style="padding: 1px;">
							<img src="~/uploads/@image.CpcmImagePath" class="rounded card-img-top object-fit-cover h-100" alt="Изображение">
						</div>
					}
				}
			</div>
			<div class="d-grid d-flex mt-1 justify-content-md-start">
				<button class="btn btn-outline-primary me-2 button-bottom" onclick="likePost(this);">
					<img src="~/images/tangerine_black.svg" />
					<span class="likes-count">@Model.LikesCount</span>
				</button>
				<button class="btn btn-outline-primary me-2 button-bottom">
					<img src="~/images/comments.svg" />
					<span class="comments-count">@Model.Post.CpcmComments.Count</span>
				</button>
				<button class="btn btn-outline-primary me-2 button-bottom">
					<img src="~/images/repost.svg" />
					<span class="repost-count">@Model.RepostsCount</span>
				</button>
			</div>
		</div>
	</div>
</div>
<script>
	function likePost(element) {
		let icon = element.querySelectorAll('img')[0];
		if (icon.src.match('tangerine_black'))
			icon.src = icon.src.replace('black', 'colored');
		else if (icon.src.match('tangerine_colored'))
			icon.src = icon.src.replace('colored', 'black');
	}
</script>